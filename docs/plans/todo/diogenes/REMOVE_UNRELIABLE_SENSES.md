[["sacred to Mars", "a she-wolf", "talk of the devil, and he appears"], {"\\r": "", "\\n": "", "\\t": "", "\\v": "", "\\f": "", "\\x1b": ""}, ["str] | None = field(default=None)\n```\n\n### 3. Remove Helper Methods\n\nFile: `src/langnet/diogenes/core.py`\n\nDELETE these methods entirely:\n- `_collect_senses()` (lines 273-296)\n- `_deduplicate_senses()` (lines 298-303)\n- `_extract_heading_from_b()` if only used by senses\n- `_normalize_text_for_comparison()` if only used by senses\n\nCheck usage first:\n```bash\ngrep -r \"_extract_heading_from_b\" src/langnet/\ngrep -r \"_normalize_text_for_comparison", "src/langnet/\n```\n\n### 4. Remove Senses Collection\n\nFile: `src/langnet/diogenes/core.py`\n\nIn `_process_block()` method (around lines 323-326), DELETE these lines:\n\n```python\nsenses = self._collect_senses(soup)\nsenses_cleaned = self._deduplicate_senses(senses)\nif len(senses_cleaned) > 0:\n    block[\"senses"], ["block.entryid for block in definitions.blocks]  # type: ignore\n    self.assertTrue(len(set(entryids)) > 1)\n    \n    # Verify entryid format is consistent (numbers separated by colons)\n    for entryid in entryids:\n        parts = entryid.split(\":\")\n        for part in parts:\n            self.assertTrue(part.isdigit())\n\ndef test_output_is_valid_json(self):\n    \"", "CLI JSON output should be valid JSON with no control characters.\"", "\n    import json\n    from src.langnet.cli import main\n    \n    runner = click.testing.CliRunner()\n    result = runner.invoke(\n        main,\n        ['tool', 'diogenes', 'parse', '--lang', 'lat', '--query', 'lupus', '--output', 'json']\n    )\n    \n    self.assertEqual(result.exit_code, 0)\n    \n    # Should parse without errors\n    data = json.loads(result.output)\n    self.assertIsInstance(data, dict)\n    self.assertIn(\"chunks", "data)\n```\n\n## Task Breakdown\n\n### Task 1: Add Text Sanitization (30 min)\n- Add `_sanitize_text()` method to `DiogenesScraper` class\n- Update `parse_word()` to sanitize response before splitting\n- Test with words that have control characters (`lupus`, `bellum`)\n\n### Task 2: Remove senses Field (15 min)\n- Remove `senses` field from `DiogenesDefinitionBlock`\n- Verify code compiles\n\n### Task 3: Remove Helper Methods (30 min)\n- Delete `_collect_senses()` and `_deduplicate_senses()`\n- Check and delete `_extract_heading_from_b()` and `_normalize_text_for_comparison()` if unused\n- Verify no references remain\n\n### Task 4: Remove Senses Collection (15 min)\n- Remove senses collection from `_process_block()`\n- Remove `senses=` from all constructions\n- Search for any other `senses` references\n\n### Task 5: Update Tests (1 hour)\n- Delete `test_lupus_has_known_sense`\n- Add new tests\n- Run all tests\n\n### Task 6: Manual Testing (45 min)\n- Test JSON with `jq`\n- Test JSON with Python\n- Test multiple words\n- Verify no `senses` field\n- Verify hierarchy preserved\n\n### Task 7: Lint and Type Check (15 min)\n- Run `just ruff-check`\n- Run `just ruff-format`\n- Run `just typecheck`\n\n## Testing Commands\n\n```bash\n# Test JSON with jq\ndevenv shell langnet-cli -- tool diogenes parse --lang lat --query lupus --output json | jq '.' > /dev/null\n\n# Test JSON with Python\ndevenv shell langnet-cli -- tool diogenes parse --lang lat --query lupus --output json > /tmp/test.json\npython3 -c \"import json; data = json.load(open('/tmp/test.json'))", "Verify senses field gone\ndevenv shell langnet-cli -- tool diogenes parse --lang lat --query lupus --output json | jq '.chunks[].definitions.blocks[0] | has(\"senses", "\n\n# Verify hierarchy\ndevenv shell langnet-cli -- tool diogenes parse --lang lat --query lupus --output json | jq", ".", "chunks[1].definitions.blocks[].entryid'\n\n# Run tests\njust test\njust ruff-check\njust ruff-format\njust typecheck\n```\n\n## Expected Results\n\n- All tests pass EXCEPT `test_lupus_has_known_sense` (deleted)\n- JSON output valid for `jq` and Python parsers\n- No linting errors\n- No `senses` field in output\n- `entryid` hierarchy intact\n\n## Files Modified\n\n1. `src/langnet/diogenes/core.py`\n2. `tests/test_diogenes_scraper.py`\n\n## Rollback Plan\n\n```bash\ngit checkout HEAD -- src/langnet/diogenes/core.py\ngit checkout HEAD -- tests/test_diogenes_scraper.py\njust test\n```\n\n## Total Estimated Time\n\n3 hours"]]